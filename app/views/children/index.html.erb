<%= render "layouts/main-nav" %>

<div class="container py-5 dash-view">
  <%= render 'layouts/notice' %>
  
  <h1 class="font-weight-bold text-label mb-3  mt-4">Children in your area</h1>
  <p class="mb-5 text-muted">See signed up children in your area.</p>

  <div class="row">
    <% @children.each do |child| %>
      <div class="col-md-4">
        <div class="border shadow rounded pb-4 mb-4">
          <div class="bg-light mb-3 pt-4" style="height: 220px;">
            <% if child.image.attached? %>
              <%= image_tag child.image, style: "width: 150px; display: block; margin: 0 auto", class: "rounded-circle" %>
            <% else %>
              <div class="text-center pt-4" style="font-size: 7em;">🧒</div>
            <% end %>
          </div>
          <div class="text-muted text-center font-weight-bold text-label">
          <span class="text-truncate d-inline-block" style="max-width: 100px"><%= child.name %></span>
          </div>
          <div class="d-flex flex-wrap justify-content-center bg-light mx-4 my-2 border-top">
            <div class="my-2">
            <% if child.grade? %>
              <span class="">🎓</span> 
              <small><%= child.grade %></small>
            <% end %>
            </div>
          </div>
          
          <div class="text-center mt-3 mb-3">
          <% if current_admin %>
              <%= link_to 'View Profile', child, class: "btn bg-green-btn text-white px-3 shadow", style: "font-size: 0.9em" %>
              <%= link_to 'Edit', edit_child_path(child), class: "btn btn-primary ml-2" %>
              <%= link_to 'Delete', child, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger ml-2' %>
            <% end %>
          </div>
        </div>
        <!-- 
        <%= image_tag(child.image, style: "width: 60px; display: block; margin: 0 auto", class: "rounded-circle") if child.image.attached? %>
        -->
      </div>
    <% end %>
  </div>
</div>